package org.bitbucket.openisoj2.core.termappiso;

import org.bitbucket.openisoj2.core.Iso8583TermApp;
import org.bitbucket.openisoj2.core.formatter.Formatters;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class TermAppIsoUnpackTests {
    @Test
    public void unpack() throws Exception {
        byte[] msgData = Formatters
                .getBinary()
                .getBytes(
                        "4231323130F23404102AC58000000000000000003031393132333435363030303030303030303039393130303030303030303030303030303030303030353130313734323036303030303530313230353130313734323036313230373831303130313231303134383130313132303531303331313233343536303030303030303030303939313D31323037353236303030303030303030303030303030363131313230323032303230303030303030303030303030313030303638303038343043303030303030303030303030303030304430303030303030303030303031383430433030303030303030303030303030303044303030303030303030303030313433F0008CC20132303230323032303030303035302020202020303054616953726320202020202053696D536E6B202020202020303030303530303030303530446562697447726F7570202030303635323138506F7374696C696F6E3A4D657461446174613234313233355465726D4170702E49534F3A5265636F6E63696C696174696F6E496E64696361746F72313131383430313634202020202020202057656C636F6D6520202020202020205C6E5C6E446174653A323031322F30352F31305C6E54696D653A31373A34323A30365C6E5C6E50616E3A2A2A2A2A2A2A2A2A2A2A2A2A2A2A2A303939315C6E4163636F756E743A30305C6E416D6F756E743A24302E30305C6E5C6E202020202020204445434C494E454420202020202020205C6E5C6E202020202020205468616E6B20596F75202020202020203035345C6E5C6E2020202020416D6F756E743A24302E30302020202020205C6E5C6E202020202020204445434C494E45442020202020202020");
        Iso8583TermApp msg = new Iso8583TermApp();
        msg.unpack(msgData, 0);
        assertEquals(Iso8583TermApp.MsgType._1210_TRAN_REQ_RSP, msg.getMsgType());
    }

    @Test
    public void unpackTwo() throws Exception {
        byte[] msgData = Formatters
                .getBinary()
                .getBytes(
                        "4231323130F23404102BC58400000000000000003031393132333435363030303030303030303039393830303030303030303030303030303035303030353130323232343536303030303131313230353130323232343536313230373831303130313231303134383130313132303531303331313233343536303030303030303030303939383D31323037353236303030303030303030303030303031323030303532363230323032303230303030303030303030303030313030303638303038343043303030303030303030303030303030304430303030303030303030303031383430433030303030303030303030303030303044303030303030303030303030303734F00047C20032303230323032303030303031312020202020313154616953726320202020202053696D536E6B202020202020303030303131303030303031446562697447726F75702020383430303630343030323834304330303030303030313030303034303031383430443030303030303031303030303030353338343044303030303030303030353030313634202020202020202057656C636F6D6520202020202020205C6E5C6E446174653A323031322F30352F31305C6E54696D653A32323A32343A35365C6E5C6E50616E3A2A2A2A2A2A2A2A2A2A2A2A2A2A2A2A303939385C6E4163636F756E743A30305C6E416D6F756E743A24352E30305C6E5C6E20202020202020415050524F56454420202020202020205C6E5C6E202020202020205468616E6B20596F75202020202020203035345C6E5C6E2020202020416D6F756E743A24352E30302020202020205C6E5C6E20202020202020415050524F5645442020202020202020");
        Iso8583TermApp msg = new Iso8583TermApp();
        msg.unpack(msgData, 0);
        assertEquals(Iso8583TermApp.MsgType._1210_TRAN_REQ_RSP, msg.getMsgType());
    }

    @Test
    public void unpackBinary() throws Exception {
        byte[] msgData = Formatters
                .getBinary()
                .getBytes(
                        "4231323130723404112BC58400313634373631373339303031303130323637303030303030303030303030303030393030303330333130333534333030303030313134303330333130333534333135313230303030303030303030303030303031343032323830363439323931313334343736313733393030313031303236373D31353132323031313335303634363038393030303030303030323030373030303230313838373737373137383837373737312020202020202020303638303034303443303030303030303030303030303030304430303030303030303030303031343034433030303030303030303030303030303044303030303030303030303030303734F00047C200383837373737313730303030303120202020203131544149534F537263312020204232344B656E796120202020303030303031303030303031426172636C61797354477270343034303630343030323834304330303030303030313030303034303031383430443030303030303031303030303030353334303444303030303030303030393030");
        Iso8583TermApp msg = new Iso8583TermApp();
        msg.unpack(msgData, 0);
        assertEquals(Iso8583TermApp.MsgType._1210_TRAN_REQ_RSP, msg.getMsgType());
        System.out.println(msg);
    }
}
